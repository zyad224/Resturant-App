<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/signin.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="/javascripts/index.js"></script>

  </head>
  <body>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <h1><%= title %></h1>

  <div id="container" class="container">
      <% if(locals.success){%>
    <div id="alt_success" class="alert alert-success">
        <%- success%>
    </div>
      <%}%>
      <% if(locals.error){%>
    <div id="alt_warning" class="alert alert-warning">
        <%=error%>
    </div>
      <%}%>

    <form class="form-signin" role="form" method="post" enctype="multipart/form-data">
      <input id="fulAvatar" name="fulAvatar" type="file" class="form-control" /><br/>
      <button id="btnSub" class="btn btn-lg btn-primary" type="submit">upload</button>
    </form>
  </div>

  <script src="/javascripts/jquery-2.1.4.min.js" type="text/javascript"></script>
  <script type="text/javascript">
      String.prototype.format = function (args) {
          var result = this;
          if (arguments.length > 0) {
              if (arguments.length == 1 && typeof (args) == "object") {
                  for (var key in args) {
                      if (args[key] != undefined) {
                          var reg = new RegExp("({" + key + "})", "g");
                          result = result.replace(reg, args[key]);
                      }
                  }
              }
              else {
                  for (var i = 0; i < arguments.length; i++) {
                      if (arguments[i] != undefined) {
                          var reg = new RegExp("({)" + i + "(})", "g");
                          result = result.replace(reg, arguments[i]);
                      }
                  }
              }
          }
          return result;
      }

      $(function(){

          $("#btnSub").on("click",function(){
              var fulAvatarVal=$("#fulAvatar").val();
              var errorTip='<div id="errorTip" class="alert alert-warning">{0}</div>';

              $("#errorTip,#alt_warning").remove();

              if(fulAvatarVal.length==0){
                  $("#container").prepend(errorTip.format("please the image"));
                  return false;

              }

              var extName=fulAvatarVal.substring(fulAvatarVal.lastIndexOf("."),fulAvatarVal.length).toLowerCase();
              alert(extName);
              if(extName!=".png" && extName!=".jpg"){
                  $("#container").prepend(errorTip.format("only support png and jpg"));
                  return false;
              }
              return true;
          });
      })
  </script>
</html>




    <!--<form id=â€œxForm" onsubmit="onSubmit('/index')">-->

        <!--<input type="text" name="rest" id="rest" >-->

        <!--<p><input type="submit" name="g" value="Submit" id="g"></p>-->
    <!--</form>-->

    <!--<div id="ProductList" class="w3-container" style="margin-top:30px"></div>-->
  </body>
</html>
